# Configuration des environnements CI/CD
# SEDI Tablette v2.2

# ========================================
# ENVIRONNEMENTS
# ========================================

# Staging Environment
STAGING_SERVER="192.168.1.25"
STAGING_PORT="722"
STAGING_USER="staging"
STAGING_PATH="/opt/sedi-tablette-staging"

# Production Environment  
PRODUCTION_SERVER="192.168.1.26"
PRODUCTION_PORT="722"
PRODUCTION_USER="maintenance"
PRODUCTION_PATH="/opt/sedi-tablette"

# ========================================
# CONFIGURATION DOCKER
# ========================================

# Images Docker
BACKEND_IMAGE="docker-sedi-backend"
FRONTEND_IMAGE="docker-sedi-frontend"

# Tags de version
VERSION_TAG="latest"
BUILD_TAG="$(date +'%Y%m%d-%H%M%S')"

# ========================================
# CONFIGURATION TESTS
# ========================================

# Timeouts
HEALTH_CHECK_TIMEOUT=30
DEPLOYMENT_TIMEOUT=300
TEST_TIMEOUT=60

# URLs de test
BACKEND_HEALTH_URL="/api/health"
FRONTEND_HEALTH_URL="/health"
ADMIN_URL="/api/admin"

# ========================================
# CONFIGURATION NOTIFICATIONS
# ========================================

# Slack (optionnel)
SLACK_WEBHOOK_URL=""
SLACK_CHANNEL="#deployments"

# Teams (optionnel)
TEAMS_WEBHOOK_URL=""

# Email (optionnel)
EMAIL_RECIPIENTS=""

# ========================================
# CONFIGURATION SÉCURITÉ
# ========================================

# SSH Configuration
SSH_STRICT_HOST_CHECKING="no"
SSH_CONNECT_TIMEOUT=30
SSH_COMMAND_TIMEOUT=60

# Retry Configuration
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY=10

# ========================================
# CONFIGURATION LOGS
# ========================================

# Niveaux de log
LOG_LEVEL_INFO="INFO"
LOG_LEVEL_SUCCESS="SUCCESS"
LOG_LEVEL_WARNING="WARNING"
LOG_LEVEL_ERROR="ERROR"
LOG_LEVEL_DEBUG="DEBUG"

# Fichiers de log
LOG_FILE="/tmp/sedi-deploy-$(date +'%Y%m%d-%H%M%S').log"
ERROR_LOG_FILE="/tmp/sedi-deploy-error-$(date +'%Y%m%d-%H%M%S').log"

# ========================================
# CONFIGURATION MONITORING
# ========================================

# Métriques de déploiement
DEPLOYMENT_START_TIME=""
DEPLOYMENT_END_TIME=""
DEPLOYMENT_DURATION=""

# Health checks post-déploiement
POST_DEPLOYMENT_CHECKS=(
    "backend_health"
    "frontend_health"
    "admin_access"
    "database_connectivity"
)

# ========================================
# CONFIGURATION ROLLBACK
# ========================================

# Sauvegarde automatique avant déploiement
AUTO_BACKUP=true
BACKUP_RETENTION_DAYS=7
BACKUP_PATH="/opt/sedi-backups"

# Rollback automatique en cas d'échec
AUTO_ROLLBACK=true
ROLLBACK_TIMEOUT=120
